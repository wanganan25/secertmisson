<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>機密代號｜線上房間</title>
  <style>
    :root {
      color-scheme: light dark;
      --bg: #f5f6fa;
      --surface: #ffffff;
      --ink: #1f2933;
      --accent: #4f46e5;
      --accent-ink: #eef2ff;
      --danger: #ef4444;
      --success: #10b981;
      --neutral: #d4d4d8;
      --card-shadow: 0 10px 28px rgba(15,23,42,.08);
      --radius: 18px;
      --duration: .25s;
      font-family: "Noto Sans TC", "Microsoft JhengHei", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--ink);
    }

    header {
      background: radial-gradient(circle at top left,#6366f1,#4338ca);
      color: #fff;
      padding: clamp(3rem,5vw,5rem) clamp(1.5rem,6vw,5rem);
      border-bottom-left-radius: 34px;
      border-bottom-right-radius: 34px;
      box-shadow: 0 20px 48px rgba(79,70,229,.35);
    }

    header h1 {
      margin: 0 0 .75rem;
      font-size: clamp(2.5rem,4vw,3.4rem);
      letter-spacing: .06em;
    }

    header p {
      margin: 0;
      max-width: 620px;
      font-size: 1.05rem;
      line-height: 1.7;
    }

    main {
      margin: -55px auto 60px;
      padding: 0 clamp(1.25rem,4vw,3.4rem) 4rem;
      max-width: 1200px;
    }

    .view {
      display: none;
    }

    .view.active {
      display: block;
    }

    .panel {
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--card-shadow);
      padding: clamp(1.8rem,4vw,2.6rem);
    }

    .lobby-grid {
      display: grid;
      gap: clamp(1.5rem,3vw,2.4rem);
    }

    @media (min-width: 1024px) {
      .lobby-grid { grid-template-columns: 1.1fr 1fr; align-items: start; }
    }

    h2 {
      margin: 0 0 1rem;
      font-size: clamp(1.8rem,3vw,2.2rem);
      display: flex;
      align-items: center;
      gap: .6rem;
    }

    h2 span {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 2.1rem;
      height: 2.1rem;
      border-radius: 50%;
      background: rgba(79,70,229,.15);
      color: #4338ca;
      font-weight: 700;
      font-size: 1rem;
    }

    form {
      display: grid;
      gap: 1rem;
    }

    label {
      font-weight: 600;
      font-size: .95rem;
      display: block;
      margin-bottom: .35rem;
    }

    input, button {
      font: inherit;
    }

    input {
      width: 100%;
      padding: .75rem 1rem;
      border-radius: 12px;
      border: 1px solid #cbd5f5;
      background: #f8fafc;
      transition: border-color var(--duration), box-shadow var(--duration);
    }

    input:focus {
      border-color: #6366f1;
      box-shadow: 0 0 0 3px rgba(99,102,241,.18);
      outline: none;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: .68rem 1.4rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform var(--duration), box-shadow var(--duration), background var(--duration), opacity var(--duration);
      background: linear-gradient(135deg,#6366f1,#4338ca);
      color: #fff;
      box-shadow: 0 14px 32px rgba(67,56,202,.28);
    }

    button:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 18px 36px rgba(67,56,202,.32); }
    button:active:not(:disabled) { transform: translateY(0); box-shadow: 0 10px 20px rgba(67,56,202,.25); }
    button:disabled { cursor: not-allowed; opacity: .6; box-shadow: none; }

    .room-list {
      display: grid;
      gap: 1rem;
    }

    .room-card {
      border: 1px solid rgba(99,102,241,.25);
      border-radius: 16px;
      padding: 1.1rem 1.2rem;
      display: grid;
      gap: .6rem;
      background: rgba(99,102,241,.06);
    }

    .room-card h3 {
      margin: 0;
      font-size: 1.25rem;
    }

    .room-meta {
      display: flex;
      flex-wrap: wrap;
      gap: .6rem;
      color: #475569;
      font-size: .92rem;
    }

    .room-status {
      display: inline-flex;
      align-items: center;
      gap: .4rem;
      padding: .3rem .9rem;
      border-radius: 999px;
      font-size: .85rem;
      background: rgba(15,23,42,.08);
      color: #111827;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: .4rem;
      padding: .35rem .8rem;
      border-radius: 999px;
      background: rgba(14,165,233,.12);
      color: #0369a1;
      font-size: .85rem;
    }

    .room-header {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1.5rem;
    }

    .room-header h2 {
      margin: 0;
    }

    .room-header .status-pill {
      background: rgba(15,23,42,.08);
      padding: .45rem 1.1rem;
      border-radius: 999px;
      font-weight: 600;
      font-size: .9rem;
    }

    .room-layout {
      display: grid;
      gap: clamp(1.4rem,2.5vw,2.2rem);
    }

    @media (min-width: 1080px) {
      .room-layout { grid-template-columns: minmax(0,340px) minmax(0,1fr); align-items: start; }
    }

    .player-card {
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,.35);
      padding: .85rem 1rem;
      background: rgba(248,250,252,.7);
      display: grid;
      gap: .3rem;
    }

    .player-card .top-line {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: .6rem;
    }

    .player-card .badge {
      border-radius: 999px;
      padding: .2rem .6rem;
      font-size: .78rem;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: .35rem;
    }

    .badge.owner { background: rgba(99,102,241,.15); color: #4338ca; }
    .badge.captain { background: rgba(248,113,113,.18); color: #b91c1c; }
    .badge.team-red { background: rgba(239,68,68,.18); color: #b91c1c; }
    .badge.team-blue { background: rgba(59,130,246,.18); color: #1d4ed8; }
    .badge.ready { background: rgba(16,185,129,.2); color: #047857; }
    .badge.waiting { background: rgba(148,163,184,.25); color: #475569; }

    .player-card .name {
      font-size: 1.05rem;
      font-weight: 600;
    }

    .room-actions {
      display: grid;
      gap: .75rem;
      margin-top: 1.2rem;
    }

    .room-actions button { width: 100%; }

    .board-panel {
      display: grid;
      gap: 1.2rem;
    }

    .board-header {
      display: flex;
      flex-wrap: wrap;
      gap: .8rem;
      align-items: center;
      justify-content: space-between;
    }

    .board-header h3 {
      margin: 0;
      font-size: 1.4rem;
    }

    .board-header .right {
      display: flex;
      gap: .6rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .board {
      display: grid;
      grid-template-columns: repeat(5,minmax(0,1fr));
      gap: .65rem;
    }

    .board.disabled { pointer-events: none; filter: grayscale(.3); opacity: .75; }

    .card {
      position: relative;
      padding: clamp(.68rem,1.5vw,.95rem);
      min-height: 84px;
      border-radius: 14px;
      background: linear-gradient(145deg,#f1f5f9,#e2e8f0);
      color: #1f2933;
      box-shadow: 0 12px 22px rgba(148,163,184,.28);
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-weight: 600;
      text-transform: capitalize;
      cursor: pointer;
      overflow: hidden;
      transition: transform var(--duration), box-shadow var(--duration), filter var(--duration);
    }

    .card:hover { transform: translateY(-2px); box-shadow: 0 16px 28px rgba(100,116,139,.35); }

    .card .label { position: relative; z-index: 1; font-size: clamp(.9rem,1.2vw,1.1rem); line-height: 1.2; }

    .card.revealed {
      color: #f8fafc;
      box-shadow: none;
    }

    .card.revealed::after,
    .board.captain-view .card::after {
      content: "";
      position: absolute;
      inset: 0;
      opacity: .88;
      transition: opacity var(--duration);
    }

    .board.captain-view .card::after { opacity: .3; pointer-events: none; }

    .card.role-red.revealed::after,
    .board.captain-view .card.role-red::after { background: linear-gradient(160deg,#f87171,#ef4444); }
    .card.role-blue.revealed::after,
    .board.captain-view .card.role-blue::after { background: linear-gradient(160deg,#60a5fa,#2563eb); }
    .card.role-neutral.revealed::after,
    .board.captain-view .card.role-neutral::after { background: linear-gradient(160deg,#cbd5f5,#94a3b8); }
    .card.role-assassin.revealed::after,
    .board.captain-view .card.role-assassin::after { background: linear-gradient(160deg,#111827,#0f172a); }

    .scoreboard {
      display: flex;
      flex-wrap: wrap;
      gap: .5rem;
    }

    .score {
      display: inline-flex;
      align-items: center;
      gap: .45rem;
      padding: .35rem .9rem;
      border-radius: 999px;
      font-weight: 600;
      background: rgba(15,23,42,.07);
      color: #0f172a;
      font-size: .9rem;
    }

    .score .dot { width: .7rem; height: .7rem; border-radius: 50%; }

    .winner-banner {
      padding: 1.1rem;
      border-radius: 14px;
      text-align: center;
      font-weight: 700;
      font-size: 1.1rem;
      background: rgba(16,185,129,.15);
      color: #047857;
    }

    .chat-panel {
      margin-top: 1.4rem;
      display: grid;
      gap: .8rem;
      padding: 1.15rem 1.2rem;
      border-radius: 14px;
      background: rgba(99,102,241,.08);
      border: 1px solid rgba(99,102,241,.2);
    }

    .chat-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: .6rem;
    }

    .chat-header h3 { margin: 0; font-size: 1.2rem; }

    .chat-log {
      max-height: 260px;
      overflow-y: auto;
      display: grid;
      gap: .7rem;
      padding: .65rem .8rem;
      border-radius: 12px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(148,163,184,.3);
    }

    .chat-log.empty {
      display: flex;
      align-items: center;
      justify-content: center;
      color: #6366f1;
      font-size: .9rem;
      text-align: center;
      padding: 1rem;
    }

    .chat-message {
      display: grid;
      gap: .25rem;
    }

    .chat-message .sender {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: .7rem;
      font-size: .88rem;
      font-weight: 600;
      color: #4338ca;
    }

    .chat-message .text {
      font-size: .95rem;
      line-height: 1.5;
      color: #1f2937;
      word-break: break-word;
    }

    .chat-form {
      display: flex;
      gap: .7rem;
    }

    .chat-form input {
      flex: 1;
      padding: .75rem 1rem;
      border-radius: 12px;
      border: 1px solid #cbd5f5;
      background: #f8fafc;
    }

    .chat-form button {
      padding: .75rem 1.4rem;
    }

    .chat-indicator.pill {
      background: rgba(79,70,229,.18);
      color: #312e81;
    }
    .helper-text {
      font-size: .92rem;
      color: #475569;
      margin-top: .4rem;
    }

    .empty-state {
      padding: 1rem 1.2rem;
      border-radius: 12px;
      background: rgba(148,163,184,.18);
      color: #475569;
      line-height: 1.5;
    }

    .danger { background: linear-gradient(135deg,#ef4444,#b91c1c); box-shadow: 0 14px 26px rgba(239,68,68,.32); }
    .ghost {
      background: rgba(148,163,184,.28);
      color: #0f172a;
      box-shadow: none;
    }

    .back-home {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: .75rem 1.4rem;
      border-radius: 999px;
      background: var(--accent);
      color: var(--accent-ink);
      text-decoration: none;
      font-weight: 600;
      transition: opacity var(--duration);
    }

    .back-home:hover {
      opacity: .85;
    }

    footer {
      text-align: center;
      padding: 2rem 1rem 3rem;
      color: #475569;
    }
  </style>
</head>
<body>
  
  
  <header>
    <h1>機密代號｜線上房間</h1>
    <p>建立房間並邀請夥伴挑戰 5x5 詞語推理。隊長給出線索，隊員根據提示翻牌，最先完成己方任務的隊伍獲勝。</p>
  </header>


  
  
  <main>
    <section id="lobby-view" class="view active">
      <div class="panel">
        <h2><span>01</span>建立房間與流程</h2>
        <div class="lobby-grid">
          <div>
            <h3 style="margin-top:0;">活動主持小提醒</h3>
            <p class="helper-text">提前建立房間並分享房號，最多 10 位玩家即可進入。所有操作都在同一頁面完成，方便示範與帶領。</p>
            <ul class="helper-text" style="padding-left:1.2rem;margin-top:.8rem;line-height:1.6;">
              <li>建議 6–8 位玩家同時遊玩，互動節奏最流暢。</li>
              <li>房主開始遊戲後會自動分隊並指派兩位隊長。</li>
              <li>輪到某隊時，只有該隊隊長能發出線索，隊員負責討論與翻牌。</li>
            </ul>
          </div>
          <div>
            <h3 style="margin-top:0;">可加入的房間</h3>
            <p class="helper-text">點擊下方房間即可加入；若顯示遊戲進行中，請等待房主重設或開啟新房間。</p>
            <div id="room-list" class="room-list"></div>
          </div>
        </div>
      </div>
    </section>

    <section id="room-view" class="view">
      <div class="panel">
        <div class="room-header">
          <div>
            <button id="leave-room" class="ghost" type="button">← 返回大廳</button>
          </div>
          <div>
            <h2 id="room-title">房間</h2>
            <div id="room-meta" class="room-meta"></div>
          </div>
          <div class="status-pill" id="room-status">等待中</div>
        </div>
        <div class="room-layout">
          <div>
            <h3 style="margin-top:0;">玩家列表</h3>
            <div id="player-list" class="room-list"></div>
            <div class="room-actions">
              <button id="toggle-ready" type="button">我準備好了</button>
              <button id="start-game" type="button" disabled>開始遊戲</button>
              <button id="reset-game" type="button" class="ghost" disabled>重新回到準備狀態</button>
            </div>
          </div>
          <div class="board-panel">
            <div class="board-header">
              <div>
                <h3>詞卡面板</h3>
                <div id="board-score" class="scoreboard"></div>
              </div>
              <div class="right">
                <div id="view-indicator" class="pill">尚未加入房間</div>
              </div>
            </div>
            <div id="board-grid" class="board"></div>
            <div id="winner-banner" class="winner-banner" style="display:none;"></div>
            <div id="team-chat-panel" class="chat-panel">
              <div class="chat-header">
                <h3>隊伍聊天</h3>
                <span id="team-chat-indicator" class="chat-indicator pill">尚未分隊</span>
              </div>
              <div id="team-chat-status" class="helper-text">請等待房主開始遊戲。</div>
              <div id="team-chat-messages" class="chat-log empty">等待房主開始遊戲…</div>
              <form id="team-chat-form" class="chat-form">
                <input id="team-chat-input" type="text" placeholder="線索詞…" autocomplete="off" maxlength="40">
                <button id="team-chat-send" type="submit" style="display:none;">送出</button>
              </form>
              <div id="team-chat-controls" class="chat-controls">
                <div class="helper-text">隊長輸入線索後，請點選對應數字。</div>
                <div id="clue-number-buttons" class="clue-number-grid">
                  <button type="button" data-clue-number="1">1</button>
                  <button type="button" data-clue-number="2">2</button>
                  <button type="button" data-clue-number="3">3</button>
                  <button type="button" data-clue-number="4">4</button>
                  <button type="button" data-clue-number="5">5</button>
                  <button type="button" data-clue-number="6">6</button>
                  <button type="button" data-clue-number="7">7</button>
                  <button type="button" data-clue-number="8">8</button>
                  <button type="button" data-clue-number="9">9</button>
                  <button type="button" data-clue-number="10">10</button>
                </div>
              </div>
            </div>
          </div>

      </div>
    </section>
  </main>


  
  
  <footer>
    <a class="back-home" href="index.html">返回主頁</a>
  </footer>


    <script type="module" src="app.js"></script>

</body>
</html>







