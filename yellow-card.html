<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>瘋狂黃牌大挑戰｜迎新房間大廳</title>
  <style>
    :root {
      color-scheme: light;
      font-family: "Noto Sans TC", "Microsoft JhengHei", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      --bg: linear-gradient(150deg, #fff8e1 0%, #ffe082 45%, #ffb300 100%);
      --surface: rgba(255, 255, 255, 0.92);
      --surface-strong: #ffffff;
      --ink: #1d1b16;
      --ink-soft: #584e3b;
      --accent: #f57f17;
      --accent-strong: #ef6c00;
      --accent-soft: rgba(245, 127, 23, .14);
      --danger: #ef476f;
      --success: #228b22;
      --shadow: 0 20px 55px rgba(204, 122, 0, .18);
      --radius-lg: 28px;
      --radius-md: 18px;
      --radius-sm: 12px;
      --transition: .24s ease;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg);
      color: var(--ink);
      display: flex;
      flex-direction: column;
    }

    header.hero {
      padding: clamp(3rem, 8vw, 5rem) clamp(1.5rem, 6vw, 5rem);
      text-align: center;
      color: var(--ink);
    }

    header.hero h1 {
      margin: 0 0 1.2rem;
      font-size: clamp(2.6rem, 5vw, 3.6rem);
      letter-spacing: .08em;
      text-transform: uppercase;
    }

    header.hero p {
      margin: 0 auto;
      max-width: 720px;
      line-height: 1.7;
      font-size: 1.1rem;
      color: var(--ink-soft);
    }

    main {
      flex: 1;
      margin: 0 auto clamp(3rem, 6vw, 4rem);
      padding: 0 clamp(1.2rem, 5vw, 4rem) clamp(3rem, 5vw, 4rem);
      max-width: 1280px;
      display: grid;
      gap: clamp(1.8rem, 3vw, 2.6rem);
    }

    section.panel {
      background: var(--surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      padding: clamp(1.8rem, 4vw, 2.6rem);
      backdrop-filter: blur(6px);
    }

    section.panel h2 {
      margin: 0 0 1.2rem;
      font-size: clamp(1.9rem, 3vw, 2.4rem);
      display: flex;
      align-items: center;
      gap: .75rem;
    }

    section.panel h2 span {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 2.4rem;
      height: 2.4rem;
      border-radius: 50%;
      background: var(--accent-soft);
      color: var(--accent-strong);
      font-weight: 700;
      font-size: 1.05rem;
    }

    .lobby {
      display: grid;
      gap: clamp(1.5rem, 3vw, 2.2rem);
    }

    .room-grid {
      display: grid;
      gap: clamp(1.2rem, 2vw, 1.6rem);
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .grid {
      display: grid;
      gap: 1.6rem;
    }

    .card {
      background: var(--surface-strong);
      border-radius: var(--radius-md);
      padding: clamp(1.25rem, 3vw, 1.8rem);
      box-shadow: var(--shadow);
    }

    .card h3 {
      margin: 0 0 .6rem;
      font-size: 1.2rem;
    }

    .card p {
      margin: 0;
      line-height: 1.6;
      color: var(--ink-soft);
    }

    .meta-title {
      font-weight: 700;
      color: var(--ink);
    }


    @media (min-width: 680px) {
      .room-grid {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      }
    }

    .room-card {
      background: var(--surface-strong);
      border-radius: var(--radius-md);
      padding: 1.2rem 1.4rem;
      box-shadow: var(--shadow);
      display: grid;
      gap: .6rem;
      border: 1px solid transparent;
      transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition);
    }

    .room-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 30px 60px rgba(180, 90, 0, .25);
      border-color: rgba(239, 108, 0, .35);
    }

    .room-card h3 {
      margin: 0;
      font-size: 1.25rem;
    }

    .room-meta {
      display: flex;
      flex-wrap: wrap;
      gap: .4rem .7rem;
      font-size: .95rem;
      color: var(--ink-soft);
    }

    .room-meta span {
      display: inline-flex;
      align-items: center;
      gap: .35rem;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: .3rem .7rem;
      border-radius: 999px;
      font-size: .78rem;
      letter-spacing: .04em;
      background: var(--accent-soft);
      color: var(--accent-strong);
    }

    button {
      font: inherit;
      border: none;
      border-radius: 999px;
      padding: .65rem 1.3rem;
      cursor: pointer;
      transition: transform var(--transition), box-shadow var(--transition), background var(--transition);
    }

    button.primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      color: #fff;
      box-shadow: 0 18px 36px rgba(239, 108, 0, .35);
    }

    button.primary[disabled] {
      opacity: .45;
      cursor: not-allowed;
      box-shadow: none;
    }

    button.primary:not([disabled]):hover {
      transform: translateY(-2px);
    }

    button.ghost {
      background: rgba(29, 27, 22, .08);
      color: var(--ink);
    }

    button.ghost:hover {
      background: rgba(29, 27, 22, .12);
    }

    .hidden { display: none !important; }

    #room-panel {
      display: none;
      flex-direction: column;
      gap: clamp(1.4rem, 3vw, 2rem);
    }

    #room-panel.active {
      display: flex;
    }

    .room-header {
      display: grid;
      gap: 1rem;
    }

    @media (min-width: 720px) {
      .room-header {
        grid-template-columns: 1fr auto;
        align-items: center;
      }
    }

    .status-stack {
      display: grid;
      gap: .5rem;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: .3rem .7rem;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent-strong);
      font-size: .85rem;
      letter-spacing: .05em;
    }

    .pill.danger { background: rgba(239, 71, 111, .1); color: var(--danger); }
    .pill.success { background: rgba(34, 139, 34, .1); color: var(--success); }

    .player-table {
      width: 100%;
      border-collapse: collapse;
      border-radius: var(--radius-md);
      overflow: hidden;
      box-shadow: var(--shadow);
      background: var(--surface-strong);
    }

    .player-table th, .player-table td {
      padding: .75rem 1rem;
      text-align: left;
      font-size: .95rem;
      border-bottom: 1px solid rgba(0,0,0,.06);
    }

    .player-table thead {
      background: rgba(255,255,255,.75);
    }

    .player-table tbody tr:nth-child(even) {
      background: rgba(255, 255, 255, .6);
    }

    .table-actions {
      display: flex;
      flex-wrap: wrap;
      gap: .4rem;
    }

    .table-actions button {
      padding: .45rem .8rem;
      font-size: .85rem;
      border-radius: 10px;
    }

    .topic-card {
      background: rgba(255, 255, 255, .86);
      border-left: 4px solid var(--accent-strong);
      padding: 1rem 1.2rem;
      border-radius: var(--radius-sm);
      box-shadow: var(--shadow);
      display: grid;
      gap: .4rem;
    }

    .topic-card h4 {
      margin: 0;
      font-size: 1.05rem;
    }

    .topic-card p {
      margin: 0;
      color: var(--ink-soft);
    }

    .toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: .6rem;
    }

    footer {
      text-align: center;
      padding: 2rem 1rem 3rem;
      color: var(--ink-soft);
    }

    footer a {
      color: var(--accent-strong);
      text-decoration: none;
      font-weight: 600;
    }

    .backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 15, 15, .45);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      z-index: 30;
    }

    .dialog {
      background: #fff;
      border-radius: var(--radius-md);
      padding: clamp(1.6rem, 4vw, 2rem);
      max-width: 400px;
      width: 100%;
      box-shadow: 0 30px 80px rgba(0,0,0,.2);
      display: grid;
      gap: 1rem;
    }

    .dialog h3 { margin: 0; }

    .dialog label { font-weight: 600; }

    .dialog input {
      font: inherit;
      padding: .7rem 1rem;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,.12);
      background: #f8fafc;
    }

    .dialog-actions {
      display: flex;
      justify-content: flex-end;
      gap: .6rem;
    }

    .toast {
      position: fixed;
      right: clamp(1rem, 3vw, 2rem);
      bottom: clamp(1rem, 3vw, 2rem);
      background: #fff;
      color: var(--ink);
      border-radius: 14px;
      padding: 1rem 1.3rem;
      box-shadow: 0 20px 50px rgba(0,0,0,.18);
      display: none;
      z-index: 40;
      min-width: 240px;
    }

    .toast.show {
      display: block;
      animation: toast-in .6s ease;
    }

    @keyframes toast-in {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <header class="hero">
    <h1>瘋狂黃牌大挑戰</h1>
    <p>歡迎進入黃牌迎新房間大廳。這裡已連線 Firebase Firestore，可即時掌握房間名額、裁判與題庫狀態。</p>
  </header>

  <main>
    <section class="panel" id="lobby-panel">
      <h2><span>01</span>房間大廳</h2>
      <div class="lobby">
        <div class="room-grid" id="room-grid"></div>
      </div>
    </section>

    <section class="panel" id="room-panel">
      <h2><span>02</span>房間控台</h2>
      <div class="room-header">
        <div class="status-stack">
          <div id="room-name" class="badge">房間</div>
          <div id="room-capacity" class="pill">0 / 8 人在場</div>
          <div id="room-judge" class="pill">裁判：—</div>
        </div>
        <div class="toolbar">
          <button type="button" class="ghost" id="btn-back">回到大廳</button>
          <button type="button" class="ghost" id="btn-leave">離開房間</button>
        </div>
      </div>
      <div class="toolbar" style="justify-content:flex-start;margin-bottom:1rem;">
        <button type="button" class="primary" id="btn-toggle-ready">我準備好了</button>
        <button type="button" class="primary hidden" id="btn-start-game">開始遊戲</button>
        <button type="button" class="ghost" id="btn-reset-ready">全部重置準備</button>
      </div>
      <div class="grid" style="gap:1.6rem;">
        <div class="card" style="overflow-x:auto;">
          <h3>玩家名單</h3>
          <table class="player-table">
            <thead>
              <tr>                <th>玩家</th>\r\n                <th>身分</th>\r\n                <th>黃牌</th>\r\n                <th>手牌</th>\r\n                <th>狀態</th>\r\n                <th>操作</th>
              </tr>
            </thead>
            <tbody id="player-tbody">
              <tr><td colspan="5" style="text-align:center;color:var(--ink-soft);padding:1.2rem;">尚未有玩家加入</td></tr>
            </tbody>
          </table>
        </div>
        <div class="grid" style="gap:1.2rem;">
          <div class="card">
            <h3>裁判與題庫</h3>
            <div class="topic-card" id="topic-card">
              <h4>目前題目</h4>
              <p id="current-topic">尚未抽題目</p>
              <span id="topic-remaining" class="pill">剩餘題目：25</span>
            </div>
            <div class="toolbar" style="margin-top:1rem;">
              <button type="button" class="primary" id="btn-draw-topic">抽題目卡</button>
              <button type="button" class="ghost" id="btn-pass-judge">下一位裁判</button>
            </div>
            <p style="margin-top:1rem;color:var(--ink-soft);font-size:.9rem;">房主可隨時調整裁判與題庫，抽題前請確認所有玩家都已準備。</p>
          </div>
          <div class="card">
            <h3>投稿列表</h3>
            <ul class="room-grid" id="activity-log" style="gap:.8rem;max-height:260px;overflow:auto;"></ul>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>完成挑戰後，可返回 <a href="index.html">迎新主頁</a> 或切換其他互動任務。</p>
  </footer>

  <div id="join-dialog" class="backdrop hidden" role="dialog" aria-modal="true">
    <div class="dialog">
      <h3>加入房間</h3>
      <p id="join-room-name" style="margin:0;color:var(--ink-soft);">—</p>
      <label for="nickname-input">請輸入暱稱</label>
      <input id="nickname-input" type="text" maxlength="12" placeholder="例：小嵐、阿哲" autocomplete="off">
      <div id="nickname-error" style="color:var(--danger);font-size:.9rem;display:none;">暱稱不可為空，也不能重複。</div>
      <div class="dialog-actions">
        <button type="button" class="ghost" id="btn-cancel-join">取消</button>
        <button type="button" class="primary" id="btn-confirm-join">加入</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script type="module" src="app-yellow.js"></script>
</body>
</html>










